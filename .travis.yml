os: linux

dist: jammy

git:
  depth: 1

language: python

python: 3.12

addons:
  chrome: stable

cache:
  directories:
  - node_modules
  - $(npm config get prefix)/bin
  - $(npm config get prefix)/lib/node_modules
  - $HOME/.cache/pip
  # - $HOME/virtualenv/python3.12.0/lib/python3.12/site-packages
  # - .venv/Lib/site-packages
  # - .venv/Scripts

install:
- nvm install node
- npm install --global fkill-cli http-server pa11y-ci
- pip install linkchecker

before_script:
- pa11y-ci --version
- linkchecker --version
- python -m site
- http-server --port 4147 &
# - nohup http-server --port 4147 &

script:
- pa11y-ci http://localhost:4147/KiraTestedHTML.html
- linkchecker http://localhost:4147/KiraTestedHTML.html
- fkill :4147 --force --verbose
# - linkchecker http://localhost:4147/KiraTestedHTML.html
